{"ts":1390629716311,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"var redis = require('redis');\nvar nohm = require(__dirname+'/../../lib/nohm').Nohm;\nvar args = require(__dirname+'/../testArgs.js');\n\nnohm.setPrefix(args.prefix);\nargs.redis.on('ready', function () {\n  nohm.setClient(args.redis);\n});\nrequire(__dirname+'/Model.js');\n\nprocess.on('message', function (msg) {\n  var event, modelName, fn;\n  \n  switch (msg.question) {\n    case 'does nohm have pubsub?':\n      process.send({\n        question: msg.question,\n        answer: nohm.getPubSubClient()\n      });\n    break;\n    \n    case 'initialize':\n      nohm.setPubSubClient(redis.createClient(args.redis_port, args.redis_host), function (err) {\n        process.send({\n          question: msg.question,\n          answer: err || true,\n          error: err\n        });\n      });\n    break;\n    \n    case 'subscribe':\n      event = msg.args.event;\n      modelName = msg.args.modelName;\n      nohm.factory(modelName).subscribe(event, function (change) {\n        process.send({\n          question: 'subscribe',\n          answer: change,\n          event: event\n        });\n      });\n    break;\n    \n    case 'subscribeOnce':\n      event = msg.args.event;\n      modelName = msg.args.modelName;\n      nohm.factory(modelName).subscribeOnce(event, function (change) {\n        process.send({\n          question: 'subscribeOnce',\n          answer: change\n        });\n      });\n    break;\n    \n    case 'unsubscribe':\n      event = msg.args.event;\n      modelName = msg.args.modelName;\n      fn = msg.args.fn;\n      nohm.factory(modelName).unsubscribe(event, fn);\n      process.send({\n        question: 'unsubscribe',\n        answer: true\n      });\n    break;\n  }\n});"]],"start1":0,"start2":0,"length1":0,"length2":1645}]],"length":1645}
{"contributors":[],"silentsave":false,"ts":1390629844022,"patch":[[{"diffs":[[0,"me, fn;\n"],[-1,"  "],[0,"\n"],[1,""],[0,"  switch"]],"start1":326,"start2":326,"length1":19,"length2":17},{"diffs":[[0," });\n    break;\n"],[-1,"    "],[0,"\n"],[1,""],[0,"    case 'initia"]],"start1":493,"start2":493,"length1":37,"length2":33},{"diffs":[[0," });\n    break;\n"],[-1,"    "],[0,"\n"],[1,""],[0,"    case 'subscr"]],"start1":757,"start2":757,"length1":37,"length2":33},{"diffs":[[0,"se 'subscribe':\n"],[1,"      console.log('test');\n"],[0,"      event = ms"]],"start1":780,"start2":780,"length1":32,"length2":59},{"diffs":[[0," });\n    break;\n"],[-1,"    "],[0,"\n"],[1,""],[0,"    case 'subscr"]],"start1":1080,"start2":1080,"length1":37,"length2":33},{"diffs":[[0," break;\n"],[-1,"    "],[0,"\n    cas"]],"start1":1372,"start2":1372,"length1":20,"length2":16}]],"length":1654,"saved":false}
{"ts":1390629851644,"patch":[[{"diffs":[[0,"tion (change) {\n"],[1,"        console.log('subscrubed');\n"],[0,"        process."]],"start1":942,"start2":942,"length1":32,"length2":67}]],"length":1689,"saved":false}
{"ts":1390630473431,"patch":[[{"diffs":[[0,"e':\n"],[-1,"      console.log('test');\n"],[0,"    "]],"start1":792,"start2":792,"length1":35,"length2":8},{"diffs":[[0,") {\n"],[-1,"        console.log('subscrubed');\n"],[0,"    "]],"start1":927,"start2":927,"length1":43,"length2":8}]],"length":1627,"saved":false}
